package org.summit.siegetnt;

import java.util.logging.Logger;
import org.bukkit.plugin.PluginManager;
import org.bukkit.plugin.java.JavaPlugin;
import org.bukkit.event.Event;
import org.bukkit.util.config.Configuration;
import org.summit.siegetnt.listener.*;

public class Main extends JavaPlugin 
{
    private static Main instance = null;
	private WorldListener worldListener;
    private ExplosionListener explosionListener;

    @Override
	public void onEnable()
	{
		PluginManager manager = this.getServer().getPluginManager();
		
        // Explosion events
        explosionListener = new ExplosionListener();
        manager.registerEvent(Event.Type.ENTITY_EXPLODE, explosionListener, Event.Priority.Normal, this);
        manager.registerEvent(Event.Type.EXPLOSION_PRIME, explosionListener, Event.Priority.Normal, this);
		
		// World/block events
        worldListener = new WorldListener();
		manager.registerEvent(Event.Type.BLOCK_PLACE, worldListener, Event.Priority.Normal, this);
        manager.registerEvent(Event.Type.BLOCK_BURN, worldListener, Event.Priority.Normal, this);
				
        Logger.getLogger("Minecraft").info("SiegeTNT enabled");
        instance = this;
	}
	
    @Override
	public void onDisable()
	{
	}
    
    public static Configuration config() 
    {
        return instance.getConfiguration();
    }

}
